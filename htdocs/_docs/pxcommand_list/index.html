

<p>
	PX Commands は、パラメータ PX を付加することで呼び出すことができる管理機能群です。<br />
	キャッシュのクリア(PX=clearcache)やパブリッシュ(PX=publish)の他、制作を効率的に進められる便利な機能にアクセスすることができます。<br />
</p>

<h2>利用可能なPXコマンド一覧</h2>
<ul>
<?php
	$filelist = $px->dbh()->ls( $px->get_conf('paths.px_dir').'_FW/pxcommands');
	foreach( $filelist as $basename ){
		print '<li>PX='.t::h(preg_replace('/\.php$/si','',$basename)).'</li>'."\n";
	}
?>
</ul>




<h2>PX=api の詳細</h2>

<p>
	PX=api は、外部のツール等から Pickles Framework 内のファイルを操作することを主な目的として設計されました。<br />
	次に示すので、PX=api が持つ機能の一覧です。<br />
</p>

<dl>
	<dt>api.dlfile.config</dt>
		<dd>コンフィグファイル(mainconfig.ini) をダウンロードする。</dd>
	<dt>api.dlfile.sitemap_definition</dt>
		<dd>サイトマップ構造定義ファイル(sitemap_definition.csv) をダウンロードする。</dd>
	<dt>api.dlfile.content</dt>
		<dd>コンテンツディレクトリ内の任意のファイルをダウンロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>
	<dt>api.dlfile.sitemap</dt>
		<dd>サイトマップディレクトリ内の任意のファイルをダウンロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>
	<dt>api.dlfile.theme.(テーマID)</dt>
		<dd>指定のテーマIDのディレクトリ内の任意のファイルをダウンロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>

	<dt>api.ulfile.config</dt>
		<dd>コンフィグファイル(mainconfig.ini) をアップロードする。</dd>
	<dt>api.ulfile.sitemap_definition</dt>
		<dd>サイトマップ構造定義ファイル(sitemap_definition.csv) をアップロードする。</dd>
	<dt>api.ulfile.content</dt>
		<dd>コンテンツディレクトリ内の任意のファイルをアップロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>
	<dt>api.ulfile.sitemap</dt>
		<dd>サイトマップディレクトリ内の任意のファイルをアップロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>
	<dt>api.ulfile.theme.(テーマID)</dt>
		<dd>指定のテーマIDのディレクトリ内の任意のファイルをアップロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>

	<dt>api.ls.content</dt>
		<dd>コンテンツディレクトリ内の任意のパスに格納されたファイルの一覧をダウンロードする。対象とするファイルのパスは、pathパラメータに指示する。ただし、_PXディレクトリ、/_px_execute.php, /.htaccess は一覧から取得することはできない。</dd>
	<dt>api.ls.sitemap</dt>
		<dd>サイトマップディレクトリ内の任意のパスに格納されたファイルの一覧をダウンロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>
	<dt>api.ls.theme.(テーマID)</dt>
		<dd>指定のテーマIDのディレクトリ内の任意のパスに格納されたファイルの一覧をダウンロードする。対象とするファイルのパスは、pathパラメータに指示する。</dd>

	<dt>api.delete.content</dt>
		<dd>コンテンツディレクトリ内の任意のファイルやディレクトリを削除する。対象とするファイルのパスは、pathパラメータに指示する。</dd>
	<dt>api.delete.sitemap</dt>
		<dd>サイトマップディレクトリ内の任意のファイルやディレクトリを削除する。対象とするファイルのパスは、pathパラメータに指示する。</dd>
	<dt>api.delete.theme.(テーマID)</dt>
		<dd>指定のテーマIDのディレクトリ内の任意のファイルやディレクトリを削除する。対象とするファイルのパスは、pathパラメータに指示する。</dd>

	<dt>api.get.config</dt>
		<dd>PxFWが読み込んだコンフィグの内容を返す。</dd>
	<dt>api.get.sitemap</dt>
		<dd>サイトマップ配列全体を返す。</dd>
	<dt>api.get.sitemap_definition</dt>
		<dd>サイトマップ定義を返す。</dd>

	<dt>api.hash</dt>
		<dd>フレームワーク管理下のすべてのファイルやディレクトリと、そのハッシュ値の一覧を出力する。text/csv の出力のみ。</dd>
</dl>

<p>
	下記のパラメータを併用することができます。<br />
</p>
<dl>
	<dt>bin</dt>
		<dd>アップロードするファイルの内容。api.ulfileでのみ使用可能。</dd>
	<dt>path</dt>
		<dd>対象とするファイルのパス。コンテンツやサイトマップなど、複数のファイルや階層の概念を持った対象の場合に付加する。content, sitemap, theme をアップロード、ダウンロード、削除する場合に使用。</dd>
	<dt>type</dt>
		<dd>形式をXML(デフォルト), JSON, JSONP の中から指定します。api.dlfile 以外で使用可能。</dd>
	<dt>callback</dt>
		<dd>JSONPのコールバック関数名を指定する。デフォルトは <code>callback</code>。typeにJSONPを指定した場合に使用可能。</dd>
</dl>


